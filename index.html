<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <title>Document</title>
</head>
<body>
<h1>è‡ªåˆ†ã¨ã®å¯¾è©±ã‚’ä¿ƒã™ã‚¢ãƒ—ãƒª</h1>
    <div id="egogram">
        ç²¾ç¥ç§‘åŒ»ã‚¨ãƒªãƒƒã‚¯ãƒ‘ãƒ¼ãƒ³ã¯ã€äººé–“ã«ã¯ã€è¦ªã‚‰ã—ã•ã€å¤§äººã‚‰ã—ã•ã€å­ä¾›ã‚‰ã—ã•ã®ï¼“ã¤ã®è‡ªæˆ‘çŠ¶æ…‹ãŒã‚ã‚‹ã¨ã„ã†ãƒ‘ãƒ¼ã‚½ãƒŠãƒªãƒ†ã‚£ç†è«–ã‚’æå”±ã—ã¾ã—ãŸã€‚
        ãã®ç†è«–ã«åŸºã¥ã„ã¦ã€è‡ªåˆ†ã®å¿ƒã®ã„ã‚ã„ã‚ãªéƒ¨åˆ†ã¨ä¼šè©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
        <div>
        <ul>
            <li><em>æ‰¹åˆ¤çš„ãªè¦ªï¼ˆCPï¼‰</em>
                å³ã—ã„å¿ƒã€‚ç¤¾ä¼šè¦ç¯„ã‚„ç›®æ¨™é”æˆã®ãŸã‚ã«è‡ªåˆ†ã‚„ä»–è€…ã‚’å¾‹ã™ã‚‹ã€‚</li>
            <li><em>é¤Šè‚²çš„ãªè¦ªï¼ˆNPï¼‰</em>
                å„ªã—ã„å¿ƒã€‚æ„›æƒ…æ·±ãã€æ€ã„ã‚„ã‚ŠãŒã‚Šã€ä¿è­·çš„ã§è¦ªåˆ‡ã§ã‚ã‚‹ã€‚</li>
            <li><em>å¤§äººï¼ˆAï¼‰</em>
                è«–ç†çš„ãªå¿ƒã€‚ãƒ‡ãƒ¼ã‚¿ã‚„äº‹å®Ÿã‚’å…ƒã«å®¢è¦³çš„ã«è€ƒãˆã€åˆç†çš„ã«åˆ¤æ–­ã€è¡Œå‹•ã™ã‚‹ã€‚
            </li>
            <li><em>è‡ªç”±ãªå­ä¾›ï¼ˆFCï¼‰</em>
                è‡ªç”±å¥”æ”¾ãªå¿ƒã€‚æ˜ã‚‹ããƒ¦ãƒ¼ãƒ¢ã‚¢ãŒã‚ã‚‹ãŒè‡ªå·±ä¸­å¿ƒçš„
            </li>
            <li><em>é †å¿œã—ãŸå­ä¾›ï¼ˆACï¼‰</em>å”èª¿çš„ãªå¿ƒã€‚ä»–äººã®è©•ä¾¡ã‚’æ°—ã«ã—é æ…®ãŒã¡</li>
            <li><em>åæŠ—çš„ãªå­ä¾›ï¼ˆRCï¼‰</em>è‡ªåˆ†ã®æ¬²æ±‚ã‚„æ€ã„ã‚’æŠ‘åœ§ã—ã™ãã¦åç™ºçš„ã«ãªã£ãŸçŠ¶æ…‹</li>
        </ul>
        </div>
        <div id="details">è‡ªåˆ†ãŒæ„Ÿã˜ã¦ã„ã‚‹ã“ã¨ã‚’å…¥åŠ›ã—ã¦é€ä¿¡ã—ã¦ãã ã•ã„ã€‚<br>
            ä¸å®‰ãªã©è‡ªåˆ†ã®å†…ã§æ¹§ãä¸ŠãŒã£ã¦ãã‚‹æ°—æŒã¡ã‚’ã€ãã‚Œãã‚Œã®å¿ƒã®ãƒ‘ãƒ¼ãƒˆã«ãªã£ã¦è¿”ä¿¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
            ä¾‹ãˆã°ã€ä»–äººã®è‡ªåˆ†ã¸ã®è¨€å‹•ã«æ‰¹åˆ¤çš„ãªæ°—æŒã¡ãŒã‚ã‚Œã°ã€CPã€å„ªã—ã„æ°—æŒã¡ãŒã‚ã‚Œã°NPã€ãªã©ã§ã™ã€‚</div>


<div id="select">
    <select name="kokoro" id="egos">
        <option id="self">ğŸ˜¶è‡ªåˆ†</option>
        <option id="cp">ğŸ¤¨æ‰¹åˆ¤çš„ãªè¦ªï¼ˆCPï¼‰</option>
        <option id="np">ğŸ˜Šé¤Šè‚²çš„ãªè¦ªï¼ˆNPï¼‰</option>
        <option id="a">ğŸ¤”å¤§äººï¼ˆAï¼‰</option>
        <option id="fc">ğŸ¤ªè‡ªç”±ãªå­ä¾›ï¼ˆFCï¼‰</option>
        <option id="ac">ğŸ˜å¾“é †ãªå­ä¾›ï¼ˆACï¼‰</option>
        <option id="rc">ğŸ˜ˆåç™ºçš„ãªå­ä¾›ï¼ˆRCï¼‰</option>
    </select>
    <div id="help"> â„¹ï¸ ä½¿ã„æ–¹</div>
</div>
<div id="sendSection">
    <textarea id="text"></textarea>
    <button id="send">é€ä¿¡</button>
</div>
</div>

<div id="output"></div>

<footer>
    <hr>
    2023 all right reserved.
</footer>



<!--** ä»¥ä¸‹Firebase **-->

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
    import { getDatabase, ref, push, set, onChildAdded, remove, onChildRemoved }
        from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";
    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "**************",
        authDomain: "**************",
        projectId: "**************",
        storageBucket: "**************",
        messagingSenderId: "**************",
        appId: "**************"
    };

const app = initializeApp(firebaseConfig);
const db = getDatabase(app); //RealtimeDBã«æ¥ç¶š
const dbRef = ref(db, "chat"); //RealtimeDBå†…ã®"chat"ã‚’ä½¿ã†

//ãƒ‡ãƒ¼ã‚¿ç™»éŒ²(Enter) 
document.querySelector("#send").addEventListener("click", function(){
    const selectElement = document.querySelector("[name='kokoro']");
    const selectedOption = selectElement.options[selectElement.selectedIndex];
    const selectedOptionText = selectedOption.textContent;
    const text = document.querySelector("#text").value;
    
    const msg = {
        kokoro: selectedOptionText,
        text: text
    }
    const newPostRef = push(dbRef);
    set(newPostRef, msg);
});

//æœ€åˆã«ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼†onSnapshotã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
onChildAdded(dbRef, function(data){
    const msg = data.val();
    const key = data.key;

    let type = ""

    if (msg.kokoro == "ğŸ˜¶è‡ªåˆ†"){
        type = "self";
    }else if (msg.kokoro == "ğŸ¤¨æ‰¹åˆ¤çš„ãªè¦ªï¼ˆCPï¼‰"){
        type = "cp";
    }else if (msg.kokoro=="ğŸ˜Šé¤Šè‚²çš„ãªè¦ªï¼ˆNPï¼‰"){
        type = "np";
    }else if (msg.kokoro == "ğŸ¤”å¤§äººï¼ˆAï¼‰"){
        type = "a";
    }else if (msg.kokoro =="ğŸ¤ªè‡ªç”±ãªå­ä¾›ï¼ˆFCï¼‰"){
        type ="fc";
    }else if (msg.kokoro == "ğŸ˜å¾“é †ãªå­ä¾›ï¼ˆACï¼‰"){
        type = "ac";
    }else if (msg.kokoro == "ğŸ˜ˆåç™ºçš„ãªå­ä¾›ï¼ˆRCï¼‰"){
        type = "rc";
    }

    let h = `<p id=${type}>`;
        h += msg.kokoro;
        h += '<br>'
        h += msg.text;
        h += '</p>';
    

    const outputElement = document.querySelector("#output");
    outputElement.insertAdjacentHTML("beforeend", h);

    // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®è¦ç´ ã‚’å–å¾—
    const textareaElement = document.querySelector("#text");

    // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®å€¤ã‚’ã‚¯ãƒªã‚¢
    textareaElement.value = "";


})

</script>
<script src="./script/script.js"></script>

</body>
</html>